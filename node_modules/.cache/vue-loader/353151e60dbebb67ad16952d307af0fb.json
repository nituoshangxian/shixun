{"remainingRequest":"E:\\shixun7_3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\shixun7_3\\frontend\\src\\components\\index\\TagsView\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\shixun7_3\\frontend\\src\\components\\index\\TagsView\\index.vue","mtime":1751700867620},{"path":"E:\\shixun7_3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\shixun7_3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\shixun7_3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\shixun7_3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJaW1wb3J0IFNjcm9sbFBhbmUgZnJvbSAnLi9TY3JvbGxQYW5lLnZ1ZScNCglpbXBvcnQgcGF0aCBmcm9tICdwYXRoJw0KCWltcG9ydCB7DQoJCWdlbmVyYXRlVGl0bGUNCgl9IGZyb20gJ0AvdXRpbHMvaTE4bicNCglpbXBvcnQgbWVudSBmcm9tICdAL3V0aWxzL21lbnUnDQoJaW1wb3J0IHsgcm91dGVzIH0gZnJvbSAnQC9yb3V0ZXIvcm91dGVyLXN0YXRpYy5qcycNCgkNCglleHBvcnQgZGVmYXVsdCB7DQoJCWNvbXBvbmVudHM6IHsNCgkJCVNjcm9sbFBhbmUNCgkJfSwNCgkJZGF0YSgpIHsNCgkJCXJldHVybiB7DQoJCQkJdmlzaWJsZTogZmFsc2UsDQoJCQkJdG9wOiAwLA0KCQkJCWxlZnQ6IDAsDQoJCQkJc2VsZWN0ZWRUYWc6IHt9LA0KCQkJCWFmZml4VGFnczogW10sDQoJCQkJcm91dGVzOiBbXQ0KCQkJfQ0KCQl9LA0KCQljb21wdXRlZDogew0KCQkJdmlzaXRlZFZpZXdzKCkgew0KCQkJCXJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS50YWdzVmlldy52aXNpdGVkVmlld3MNCgkJCX0sDQoJCQkvLyByb3V0ZXMoKSB7DQoJCQkvLyAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5tZW51LnJvdXRlcw0KCQkJLy8gfQ0KCQl9LA0KCQl3YXRjaDogew0KCQkJJHJvdXRlKCkgew0KCQkJCXRoaXMuYWRkVGFncygpDQoJCQkJdGhpcy5tb3ZlVG9DdXJyZW50VGFnKCkNCgkJCX0sDQoJCQl2aXNpYmxlKHZhbHVlKSB7DQoJCQkJaWYgKHZhbHVlKSB7DQoJCQkJCWRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlTWVudSkNCgkJCQl9IGVsc2Ugew0KCQkJCQlkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZU1lbnUpDQoJCQkJfQ0KCQkJfQ0KCQl9LA0KCQltb3VudGVkKCkgew0KCQkJdGhpcy5pbml0VGFncygpDQoJCQl0aGlzLmFkZFRhZ3MoKQ0KCQl9LA0KCQljcmVhdGVkKCkgew0KCQkJdGhpcy5yb3V0ZXMgPSBtZW51DQoJCQkNCgkJCWxldCBtZW51TGlzdCA9IFtdDQoJCQljb25zdCBtZW51cyA9IG1lbnUubGlzdCgpDQoJCQlpZiAobWVudXMpIHsNCgkJCQltZW51TGlzdCA9IG1lbnVzDQoJCQl9IGVsc2Ugew0KCQkJCWxldCBwYXJhbXMgPSB7DQoJCQkJCXBhZ2U6IDEsDQoJCQkJCWxpbWl0OiAxLA0KCQkJCQlzb3J0OiAnaWQnLA0KCQkJCX0NCgkJCQ0KCQkJCXRoaXMuJGh0dHAoew0KCQkJCQl1cmw6ICJtZW51L2xpc3QiLA0KCQkJCQltZXRob2Q6ICJnZXQiLA0KCQkJCQlwYXJhbXM6IHBhcmFtcw0KCQkJCX0pLnRoZW4oKHsNCgkJCQkJZGF0YQ0KCQkJCX0pID0+IHsNCgkJCQkJaWYgKGRhdGEgJiYgZGF0YS5jb2RlID09PSAwKSB7DQoJCQkJCQltZW51TGlzdCA9IEpTT04ucGFyc2UoZGF0YS5kYXRhLmxpc3RbMF0ubWVudWpzb24pOw0KCQkJCQkJdGhpcy4kc3RvcmFnZS5zZXQoIm1lbnVzIiwgbWVudUxpc3QpOw0KCQkJCQl9DQoJCQkJfSkNCgkJCX0NCgkJCXRoaXMucm9sZSA9IHRoaXMuJHN0b3JhZ2UuZ2V0KCdyb2xlJykNCgkJCQ0KCQkJZm9yIChsZXQgaSA9IDA7IGkgPCBtZW51TGlzdC5sZW5ndGg7IGkrKykgew0KCQkJCWlmIChtZW51TGlzdFtpXS5yb2xlTmFtZSA9PSB0aGlzLnJvbGUpIHsNCgkJCQkJdGhpcy5yb3V0ZXMgPSBtZW51TGlzdFtpXS5iYWNrTWVudTsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0KCQkJfQ0KCQkJdGhpcy5yb3V0ZXMgPSByb3V0ZXMuY29uY2F0KHRoaXMucm91dGVzKTsNCgkJCS8vIGNvbnNvbGUubG9nKHRoaXMudmlzaXRlZFZpZXdzKQ0KCQkJLy8gY29uc29sZS5sb2codGhpcy5yb3V0ZXMpDQoJCQkvLyB0aGlzLmluaXRUYWdzKCkNCgkJCS8vIHRoaXMuYWRkVGFncygpDQoJCX0sDQoJCW1ldGhvZHM6IHsNCgkJCWlzQWN0aXZlKHJvdXRlKSB7DQoJCQkJcmV0dXJuIHJvdXRlLnBhdGggPT09IHRoaXMuJHJvdXRlLnBhdGgNCgkJCX0sDQoJCQlmaWx0ZXJBZmZpeFRhZ3Mocm91dGVzLCBiYXNlUGF0aCA9ICcvJykgew0KCQkJCWxldCB0YWdzID0gW10NCgkJCQlyb3V0ZXMuZm9yRWFjaChyb3V0ZSA9PiB7DQoJCQkJCWlmIChyb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEuYWZmaXgpIHsNCgkJCQkJCWNvbnN0IHRhZ1BhdGggPSBwYXRoLnJlc29sdmUoYmFzZVBhdGgsIHJvdXRlLnBhdGgpDQoJCQkJCQl0YWdzLnB1c2goew0KCQkJCQkJCWZ1bGxQYXRoOiB0YWdQYXRoLA0KCQkJCQkJCXBhdGg6IHRhZ1BhdGgsDQoJCQkJCQkJbmFtZTogcm91dGUubmFtZSwNCgkJCQkJCQltZXRhOiB7DQoJCQkJCQkJCS4uLnJvdXRlLm1ldGENCgkJCQkJCQl9DQoJCQkJCQl9KQ0KCQkJCQl9DQoJCQkJCWlmIChyb3V0ZS5jaGlsZHJlbikgew0KCQkJCQkJY29uc3QgdGVtcFRhZ3MgPSB0aGlzLmZpbHRlckFmZml4VGFncyhyb3V0ZS5jaGlsZHJlbiwgcm91dGUucGF0aCkNCgkJCQkJCWlmICh0ZW1wVGFncy5sZW5ndGggPj0gMSkgew0KCQkJCQkJCXRhZ3MgPSBbLi4udGFncywgLi4udGVtcFRhZ3NdDQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9KQ0KCQkJCXJldHVybiB0YWdzDQoJCQl9LA0KCQkJZ2VuZXJhdGVUaXRsZSwNCgkJCWluaXRUYWdzKCkgew0KCQkJCWNvbnN0IGFmZml4VGFncyA9IHRoaXMuYWZmaXhUYWdzID0gdGhpcy5maWx0ZXJBZmZpeFRhZ3ModGhpcy5yb3V0ZXMpDQoJCQkJZm9yIChjb25zdCB0YWcgb2YgYWZmaXhUYWdzKSB7DQoJCQkJCS8vIE11c3QgaGF2ZSB0YWcgbmFtZQ0KCQkJCQlpZiAodGFnLm5hbWUpIHsNCgkJCQkJCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9hZGRWaXNpdGVkVmlldycsIHRhZykNCgkJCQkJfQ0KCQkJCX0NCgkJCX0sDQoJCQlhZGRUYWdzKCkgew0KCQkJCWNvbnN0IHsNCgkJCQkJbmFtZQ0KCQkJCX0gPSB0aGlzLiRyb3V0ZQ0KCQkJCWlmIChuYW1lKSB7DQoJCQkJCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9hZGRWaWV3JywgdGhpcy4kcm91dGUpDQoJCQkJfQ0KCQkJCXJldHVybiBmYWxzZQ0KCQkJfSwNCgkJCW1vdmVUb0N1cnJlbnRUYWcoKSB7DQoJCQkJY29uc3QgdGFncyA9IHRoaXMuJHJlZnMudGFnDQoJCQkJdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KCQkJCQlmb3IgKGNvbnN0IHRhZyBvZiB0YWdzKSB7DQoJCQkJCQlpZiAodGFnLnRvLnBhdGggPT09IHRoaXMuJHJvdXRlLnBhdGgpIHsNCgkJCQkJCQl0aGlzLiRyZWZzLnNjcm9sbFBhbmUubW92ZVRvVGFyZ2V0KHRhZykNCgkJCQkJCQkvLyB3aGVuIHF1ZXJ5IGlzIGRpZmZlcmVudCB0aGVuIHVwZGF0ZQ0KCQkJCQkJCWlmICh0YWcudG8uZnVsbFBhdGggIT09IHRoaXMuJHJvdXRlLmZ1bGxQYXRoKSB7DQoJCQkJCQkJCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy91cGRhdGVWaXNpdGVkVmlldycsIHRoaXMuJHJvdXRlKQ0KCQkJCQkJCX0NCgkJCQkJCQlicmVhaw0KCQkJCQkJfQ0KCQkJCQl9DQoJCQkJfSkNCgkJCX0sDQoJCQlyZWZyZXNoU2VsZWN0ZWRUYWcodmlldykgew0KCQkJCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9kZWxDYWNoZWRWaWV3JywgdmlldykudGhlbigoKSA9PiB7DQoJCQkJCWNvbnN0IHsNCgkJCQkJCWZ1bGxQYXRoDQoJCQkJCX0gPSB2aWV3DQoJCQkJCXRoaXMuJG5leHRUaWNrKCgpID0+IHsNCgkJCQkJCXRoaXMuJHJvdXRlci5yZXBsYWNlKHsNCgkJCQkJCQlwYXRoOiAnL3JlZGlyZWN0JyArIGZ1bGxQYXRoDQoJCQkJCQl9KQ0KCQkJCQl9KQ0KCQkJCX0pDQoJCQl9LA0KCQkJY2xvc2VTZWxlY3RlZFRhZyh2aWV3KSB7DQoJCQkJdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbFZpZXcnLCB2aWV3KS50aGVuKCh7DQoJCQkJCXZpc2l0ZWRWaWV3cw0KCQkJCX0pID0+IHsNCgkJCQkJaWYgKHRoaXMuaXNBY3RpdmUodmlldykpIHsNCgkJCQkJCXRoaXMudG9MYXN0Vmlldyh2aXNpdGVkVmlld3MsIHZpZXcpDQoJCQkJCX0NCgkJCQl9KQ0KCQkJfSwNCgkJCWNsb3NlT3RoZXJzVGFncygpIHsNCgkJCQl0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLnNlbGVjdGVkVGFnKQ0KCQkJCXRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9kZWxPdGhlcnNWaWV3cycsIHRoaXMuc2VsZWN0ZWRUYWcpLnRoZW4oKCkgPT4gew0KCQkJCQl0aGlzLm1vdmVUb0N1cnJlbnRUYWcoKQ0KCQkJCX0pDQoJCQl9LA0KCQkJY2xvc2VBbGxUYWdzKHZpZXcpIHsNCgkJCQl0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGFnc1ZpZXcvZGVsQWxsVmlld3MnKS50aGVuKCh7DQoJCQkJCXZpc2l0ZWRWaWV3cw0KCQkJCX0pID0+IHsNCgkJCQkJaWYgKHRoaXMuYWZmaXhUYWdzLnNvbWUodGFnID0+IHRhZy5wYXRoID09PSB2aWV3LnBhdGgpKSB7DQoJCQkJCQlyZXR1cm4NCgkJCQkJfQ0KCQkJCQl0aGlzLnRvTGFzdFZpZXcodmlzaXRlZFZpZXdzLCB2aWV3KQ0KCQkJCX0pDQoJCQl9LA0KCQkJdG9MYXN0Vmlldyh2aXNpdGVkVmlld3MsIHZpZXcpIHsNCgkJCQljb25zdCBsYXRlc3RWaWV3ID0gdmlzaXRlZFZpZXdzLnNsaWNlKC0xKVswXQ0KCQkJCWlmIChsYXRlc3RWaWV3KSB7DQoJCQkJCXRoaXMuJHJvdXRlci5wdXNoKGxhdGVzdFZpZXcpDQoJCQkJfSBlbHNlIHsNCgkJCQkJLy8gbm93IHRoZSBkZWZhdWx0IGlzIHRvIHJlZGlyZWN0IHRvIHRoZSBob21lIHBhZ2UgaWYgdGhlcmUgaXMgbm8gdGFncy12aWV3LA0KCQkJCQkvLyB5b3UgY2FuIGFkanVzdCBpdCBhY2NvcmRpbmcgdG8geW91ciBuZWVkcy4NCgkJCQkJaWYgKHZpZXcubmFtZSA9PT0gJ0Rhc2hib2FyZCcpIHsNCgkJCQkJCS8vIHRvIHJlbG9hZCBob21lIHBhZ2UNCgkJCQkJCXRoaXMuJHJvdXRlci5yZXBsYWNlKHsNCgkJCQkJCQlwYXRoOiAnL3JlZGlyZWN0JyArIHZpZXcuZnVsbFBhdGgNCgkJCQkJCX0pDQoJCQkJCX0gZWxzZSB7DQoJCQkJCQl0aGlzLiRyb3V0ZXIucHVzaCgnLycpDQoJCQkJCX0NCgkJCQl9DQoJCQl9LA0KCQkJb3Blbk1lbnUodGFnLCBlKSB7DQoJCQkJY29uc3QgbWVudU1pbldpZHRoID0gMTA1DQoJCQkJY29uc3Qgb2Zmc2V0TGVmdCA9IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLy8gY29udGFpbmVyIG1hcmdpbiBsZWZ0DQoJCQkJY29uc3Qgb2Zmc2V0V2lkdGggPSB0aGlzLiRlbC5vZmZzZXRXaWR0aCAvLyBjb250YWluZXIgd2lkdGgNCgkJCQljb25zdCBtYXhMZWZ0ID0gb2Zmc2V0V2lkdGggLSBtZW51TWluV2lkdGggLy8gbGVmdCBib3VuZGFyeQ0KCQkJCWNvbnN0IGxlZnQgPSBlLmNsaWVudFggLSBvZmZzZXRMZWZ0ICsgMTUgLy8gMTU6IG1hcmdpbiByaWdodA0KDQoJCQkJaWYgKGxlZnQgPiBtYXhMZWZ0KSB7DQoJCQkJCXRoaXMubGVmdCA9IG1heExlZnQNCgkJCQl9IGVsc2Ugew0KCQkJCQl0aGlzLmxlZnQgPSBsZWZ0DQoJCQkJfQ0KDQoJCQkJdGhpcy50b3AgPSBlLmNsaWVudFkNCgkJCQl0aGlzLnZpc2libGUgPSB0cnVlDQoJCQkJdGhpcy5zZWxlY3RlZFRhZyA9IHRhZw0KCQkJfSwNCgkJCWNsb3NlTWVudSgpIHsNCgkJCQl0aGlzLnZpc2libGUgPSBmYWxzZQ0KCQkJfQ0KCQl9DQoJfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/index/TagsView","sourcesContent":["<template>\r\n\t<div id=\"tags-view-container\" class=\"tags-view-container\" :style='{\"padding\":\"0px 220px 0 0\",\"boxShadow\":\"none\",\"margin\":\"0px auto 0\",\"borderColor\":\"#958344\",\"display\":\"block\",\"overflow\":\"hidden\",\"borderRadius\":\"8px\",\"background\":\"#f1ede2\",\"borderWidth\":\"1px\",\"width\":\"96%\",\"fontSize\":\"14px\",\"lineHeight\":\"40px\",\"borderStyle\":\"solid\",\"height\":\"40px\"}'>\r\n\t\t<scroll-pane ref=\"scrollPane\" class=\"tags-view-wrapper\">\r\n\t\t\t<div class=\"tags-view-box\" :style='{\"width\":\"auto\",\"padding\":\"0 0 0 5px\",\"whiteSpace\":\"nowrap\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n\t\t\t\t<router-link v-for=\"tag in visitedViews\" ref=\"tag\" :key=\"tag.path\" :class=\"isActive(tag)?'active':''\"\r\n\t\t\t\t\t:to=\"{ path: tag.path, query: tag.query, fullPath: tag.fullPath }\" tag=\"span\" class=\"tags-view-item\"\r\n\t\t\t\t\t@click.middle.native=\"closeSelectedTag(tag)\" @contextmenu.prevent.native=\"openMenu(tag,$event)\">\r\n\t\t\t\t\t<span class=\"text\">{{ tag.name }}</span>\r\n\t\t\t\t\t<span v-if=\"!tag.meta.affix\" class=\"el-icon-close\" @click.prevent.stop=\"closeSelectedTag(tag)\" />\r\n\t\t\t\t</router-link>\r\n\t\t\t</div>\r\n\t\t</scroll-pane>\r\n\t\t<ul v-show=\"visible\" :style=\"{left:left+'px',top:top+'px'}\" class=\"contextmenu\">\r\n\t\t\t<li v-if=\"!(selectedTag.meta&&selectedTag.meta.affix)\" @click=\"closeSelectedTag(selectedTag)\">Close</li>\r\n\t\t\t<li @click=\"closeAllTags(selectedTag)\">Close All</li>\r\n\t\t</ul>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport ScrollPane from './ScrollPane.vue'\r\n\timport path from 'path'\r\n\timport {\r\n\t\tgenerateTitle\r\n\t} from '@/utils/i18n'\r\n\timport menu from '@/utils/menu'\r\n\timport { routes } from '@/router/router-static.js'\r\n\t\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tScrollPane\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvisible: false,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0,\r\n\t\t\t\tselectedTag: {},\r\n\t\t\t\taffixTags: [],\r\n\t\t\t\troutes: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tvisitedViews() {\r\n\t\t\t\treturn this.$store.state.tagsView.visitedViews\r\n\t\t\t},\r\n\t\t\t// routes() {\r\n\t\t\t//   return this.$store.state.menu.routes\r\n\t\t\t// }\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t$route() {\r\n\t\t\t\tthis.addTags()\r\n\t\t\t\tthis.moveToCurrentTag()\r\n\t\t\t},\r\n\t\t\tvisible(value) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tdocument.body.addEventListener('click', this.closeMenu)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.body.removeEventListener('click', this.closeMenu)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.initTags()\r\n\t\t\tthis.addTags()\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.routes = menu\r\n\t\t\t\r\n\t\t\tlet menuList = []\r\n\t\t\tconst menus = menu.list()\r\n\t\t\tif (menus) {\r\n\t\t\t\tmenuList = menus\r\n\t\t\t} else {\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tlimit: 1,\r\n\t\t\t\t\tsort: 'id',\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tthis.$http({\r\n\t\t\t\t\turl: \"menu/list\",\r\n\t\t\t\t\tmethod: \"get\",\r\n\t\t\t\t\tparams: params\r\n\t\t\t\t}).then(({\r\n\t\t\t\t\tdata\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tif (data && data.code === 0) {\r\n\t\t\t\t\t\tmenuList = JSON.parse(data.data.list[0].menujson);\r\n\t\t\t\t\t\tthis.$storage.set(\"menus\", menuList);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.role = this.$storage.get('role')\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < menuList.length; i++) {\r\n\t\t\t\tif (menuList[i].roleName == this.role) {\r\n\t\t\t\t\tthis.routes = menuList[i].backMenu;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.routes = routes.concat(this.routes);\r\n\t\t\t// console.log(this.visitedViews)\r\n\t\t\t// console.log(this.routes)\r\n\t\t\t// this.initTags()\r\n\t\t\t// this.addTags()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tisActive(route) {\r\n\t\t\t\treturn route.path === this.$route.path\r\n\t\t\t},\r\n\t\t\tfilterAffixTags(routes, basePath = '/') {\r\n\t\t\t\tlet tags = []\r\n\t\t\t\troutes.forEach(route => {\r\n\t\t\t\t\tif (route.meta && route.meta.affix) {\r\n\t\t\t\t\t\tconst tagPath = path.resolve(basePath, route.path)\r\n\t\t\t\t\t\ttags.push({\r\n\t\t\t\t\t\t\tfullPath: tagPath,\r\n\t\t\t\t\t\t\tpath: tagPath,\r\n\t\t\t\t\t\t\tname: route.name,\r\n\t\t\t\t\t\t\tmeta: {\r\n\t\t\t\t\t\t\t\t...route.meta\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (route.children) {\r\n\t\t\t\t\t\tconst tempTags = this.filterAffixTags(route.children, route.path)\r\n\t\t\t\t\t\tif (tempTags.length >= 1) {\r\n\t\t\t\t\t\t\ttags = [...tags, ...tempTags]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn tags\r\n\t\t\t},\r\n\t\t\tgenerateTitle,\r\n\t\t\tinitTags() {\r\n\t\t\t\tconst affixTags = this.affixTags = this.filterAffixTags(this.routes)\r\n\t\t\t\tfor (const tag of affixTags) {\r\n\t\t\t\t\t// Must have tag name\r\n\t\t\t\t\tif (tag.name) {\r\n\t\t\t\t\t\tthis.$store.dispatch('tagsView/addVisitedView', tag)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddTags() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tname\r\n\t\t\t\t} = this.$route\r\n\t\t\t\tif (name) {\r\n\t\t\t\t\tthis.$store.dispatch('tagsView/addView', this.$route)\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t},\r\n\t\t\tmoveToCurrentTag() {\r\n\t\t\t\tconst tags = this.$refs.tag\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tfor (const tag of tags) {\r\n\t\t\t\t\t\tif (tag.to.path === this.$route.path) {\r\n\t\t\t\t\t\t\tthis.$refs.scrollPane.moveToTarget(tag)\r\n\t\t\t\t\t\t\t// when query is different then update\r\n\t\t\t\t\t\t\tif (tag.to.fullPath !== this.$route.fullPath) {\r\n\t\t\t\t\t\t\t\tthis.$store.dispatch('tagsView/updateVisitedView', this.$route)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trefreshSelectedTag(view) {\r\n\t\t\t\tthis.$store.dispatch('tagsView/delCachedView', view).then(() => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tfullPath\r\n\t\t\t\t\t} = view\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.$router.replace({\r\n\t\t\t\t\t\t\tpath: '/redirect' + fullPath\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcloseSelectedTag(view) {\r\n\t\t\t\tthis.$store.dispatch('tagsView/delView', view).then(({\r\n\t\t\t\t\tvisitedViews\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tif (this.isActive(view)) {\r\n\t\t\t\t\t\tthis.toLastView(visitedViews, view)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcloseOthersTags() {\r\n\t\t\t\tthis.$router.push(this.selectedTag)\r\n\t\t\t\tthis.$store.dispatch('tagsView/delOthersViews', this.selectedTag).then(() => {\r\n\t\t\t\t\tthis.moveToCurrentTag()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcloseAllTags(view) {\r\n\t\t\t\tthis.$store.dispatch('tagsView/delAllViews').then(({\r\n\t\t\t\t\tvisitedViews\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tif (this.affixTags.some(tag => tag.path === view.path)) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.toLastView(visitedViews, view)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoLastView(visitedViews, view) {\r\n\t\t\t\tconst latestView = visitedViews.slice(-1)[0]\r\n\t\t\t\tif (latestView) {\r\n\t\t\t\t\tthis.$router.push(latestView)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// now the default is to redirect to the home page if there is no tags-view,\r\n\t\t\t\t\t// you can adjust it according to your needs.\r\n\t\t\t\t\tif (view.name === 'Dashboard') {\r\n\t\t\t\t\t\t// to reload home page\r\n\t\t\t\t\t\tthis.$router.replace({\r\n\t\t\t\t\t\t\tpath: '/redirect' + view.fullPath\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$router.push('/')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topenMenu(tag, e) {\r\n\t\t\t\tconst menuMinWidth = 105\r\n\t\t\t\tconst offsetLeft = this.$el.getBoundingClientRect().left // container margin left\r\n\t\t\t\tconst offsetWidth = this.$el.offsetWidth // container width\r\n\t\t\t\tconst maxLeft = offsetWidth - menuMinWidth // left boundary\r\n\t\t\t\tconst left = e.clientX - offsetLeft + 15 // 15: margin right\r\n\r\n\t\t\t\tif (left > maxLeft) {\r\n\t\t\t\t\tthis.left = maxLeft\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.left = left\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.top = e.clientY\r\n\t\t\t\tthis.visible = true\r\n\t\t\t\tthis.selectedTag = tag\r\n\t\t\t},\r\n\t\t\tcloseMenu() {\r\n\t\t\t\tthis.visible = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.tags-view-container {\r\n\t\theight: 34px;\r\n\t\twidth: 100%;\r\n\t\tbackground: #fff;\r\n\t\tborder-bottom: 1px solid #d8dce5;\r\n\t\tbox-shadow: 0 1px 3px 0 rgba(0, 0, 0, .12), 0 0 3px 0 rgba(0, 0, 0, .04);\r\n\r\n\t\t.contextmenu {\r\n\t\t\tmargin: 0;\r\n\t\t\tbackground: #fff;\r\n\t\t\tz-index: 3000;\r\n\t\t\tposition: absolute;\r\n\t\t\tlist-style-type: none;\r\n\t\t\tpadding: 5px 0;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tfont-size: 12px;\r\n\t\t\tfont-weight: 400;\r\n\t\t\tcolor: #333;\r\n\t\t\tbox-shadow: 2px 2px 3px 0 rgba(0, 0, 0, .3);\r\n\r\n\t\t\tli {\r\n\t\t\t\tmargin: 0;\r\n\t\t\t\tpadding: 7px 16px;\r\n\t\t\t\tcursor: pointer;\r\n\r\n\t\t\t\t&:hover {\r\n\t\t\t\t\tbackground: #eee;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tpadding: 0px 8px;\r\n\t\t\t\tmargin: 0 5px 0px 0;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tfont-size: inherit;\r\n\t\t\t\tborder-color: rgba(255, 255, 255, .2);\r\n\t\t\t\tline-height: 28px;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\tbackground: none;\r\n\t\t\t\twidth: auto;\r\n\t\t\t\tborder-width: 0px;\r\n\t\t\t\tborder-style: solid;\r\n\t\t\t\theight: 28px;\r\n\t\t\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item:hover {\r\n\t\t\t\tborder: 0px solid rgba(255, 255, 255, .2);\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground: #958344;\r\n\t\t\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item.active {\r\n\t\t\t\tborder: 0px solid rgba(255, 255, 255, .2);\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground: #958344;\r\n\t\t\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item .text {\r\n\t\t\t\tcolor: inherit;\r\n\t\t\t\tfont-size: inherit;\r\n\t\t\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item .el-icon-close {\r\n\t\t\t\tcolor: inherit;\r\n\t\t\t\tfont-size: inherit;\r\n\t\t\t}\r\n</style>"]}]}