{"remainingRequest":"E:\\shixun7_3\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\shixun7_3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\shixun7_3\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\shixun7_3\\frontend\\src\\components\\index\\TagsView\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\shixun7_3\\frontend\\src\\components\\index\\TagsView\\index.vue","mtime":1751901115618},{"path":"E:\\shixun7_3\\frontend\\babel.config.js","mtime":1751688362000},{"path":"E:\\shixun7_3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\shixun7_3\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\shixun7_3\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\shixun7_3\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLml0ZXJhdG9yLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuaXRlcmF0b3IuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5pdGVyYXRvci5zb21lLmpzIjsKaW1wb3J0IFNjcm9sbFBhbmUgZnJvbSAnLi9TY3JvbGxQYW5lLnZ1ZSc7CmltcG9ydCBwYXRoIGZyb20gJ3BhdGgnOwppbXBvcnQgeyBnZW5lcmF0ZVRpdGxlIH0gZnJvbSAnQC91dGlscy9pMThuJzsKaW1wb3J0IG1lbnUgZnJvbSAnQC91dGlscy9tZW51JzsKaW1wb3J0IHsgcm91dGVzIH0gZnJvbSAnQC9yb3V0ZXIvcm91dGVyLXN0YXRpYy5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBTY3JvbGxQYW5lCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmlzaWJsZTogZmFsc2UsCiAgICAgIHRvcDogMCwKICAgICAgbGVmdDogMCwKICAgICAgc2VsZWN0ZWRUYWc6IHt9LAogICAgICBhZmZpeFRhZ3M6IFtdLAogICAgICByb3V0ZXM6IFtdCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHZpc2l0ZWRWaWV3cygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnRhZ3NWaWV3LnZpc2l0ZWRWaWV3czsKICAgIH0KICAgIC8vIHJvdXRlcygpIHsKICAgIC8vICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLm1lbnUucm91dGVzCiAgICAvLyB9CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlKCkgewogICAgICB0aGlzLmFkZFRhZ3MoKTsKICAgICAgdGhpcy5tb3ZlVG9DdXJyZW50VGFnKCk7CiAgICB9LAogICAgdmlzaWJsZSh2YWx1ZSkgewogICAgICBpZiAodmFsdWUpIHsKICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZU1lbnUpOwogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlTWVudSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRUYWdzKCk7CiAgICB0aGlzLmFkZFRhZ3MoKTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnJvdXRlcyA9IG1lbnU7CiAgICBsZXQgbWVudUxpc3QgPSBbXTsKICAgIGNvbnN0IG1lbnVzID0gbWVudS5saXN0KCk7CiAgICBpZiAobWVudXMpIHsKICAgICAgbWVudUxpc3QgPSBtZW51czsKICAgIH0gZWxzZSB7CiAgICAgIGxldCBwYXJhbXMgPSB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMSwKICAgICAgICBzb3J0OiAnaWQnCiAgICAgIH07CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogIm1lbnUvbGlzdCIsCiAgICAgICAgbWV0aG9kOiAiZ2V0IiwKICAgICAgICBwYXJhbXM6IHBhcmFtcwogICAgICB9KS50aGVuKCh7CiAgICAgICAgZGF0YQogICAgICB9KSA9PiB7CiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5jb2RlID09PSAwKSB7CiAgICAgICAgICBtZW51TGlzdCA9IEpTT04ucGFyc2UoZGF0YS5kYXRhLmxpc3RbMF0ubWVudWpzb24pOwogICAgICAgICAgdGhpcy4kc3RvcmFnZS5zZXQoIm1lbnVzIiwgbWVudUxpc3QpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICB0aGlzLnJvbGUgPSB0aGlzLiRzdG9yYWdlLmdldCgncm9sZScpOwogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtZW51TGlzdC5sZW5ndGg7IGkrKykgewogICAgICBpZiAobWVudUxpc3RbaV0ucm9sZU5hbWUgPT0gdGhpcy5yb2xlKSB7CiAgICAgICAgdGhpcy5yb3V0ZXMgPSBtZW51TGlzdFtpXS5iYWNrTWVudTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQogICAgdGhpcy5yb3V0ZXMgPSByb3V0ZXMuY29uY2F0KHRoaXMucm91dGVzKTsKICAgIC8vIGNvbnNvbGUubG9nKHRoaXMudmlzaXRlZFZpZXdzKQogICAgLy8gY29uc29sZS5sb2codGhpcy5yb3V0ZXMpCiAgICAvLyB0aGlzLmluaXRUYWdzKCkKICAgIC8vIHRoaXMuYWRkVGFncygpCiAgfSwKICBtZXRob2RzOiB7CiAgICBpc0FjdGl2ZShyb3V0ZSkgewogICAgICByZXR1cm4gcm91dGUucGF0aCA9PT0gdGhpcy4kcm91dGUucGF0aDsKICAgIH0sCiAgICBmaWx0ZXJBZmZpeFRhZ3Mocm91dGVzLCBiYXNlUGF0aCA9ICcvJykgewogICAgICBsZXQgdGFncyA9IFtdOwogICAgICByb3V0ZXMuZm9yRWFjaChyb3V0ZSA9PiB7CiAgICAgICAgaWYgKHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5hZmZpeCkgewogICAgICAgICAgY29uc3QgdGFnUGF0aCA9IHBhdGgucmVzb2x2ZShiYXNlUGF0aCwgcm91dGUucGF0aCk7CiAgICAgICAgICB0YWdzLnB1c2goewogICAgICAgICAgICBmdWxsUGF0aDogdGFnUGF0aCwKICAgICAgICAgICAgcGF0aDogdGFnUGF0aCwKICAgICAgICAgICAgbmFtZTogcm91dGUubmFtZSwKICAgICAgICAgICAgbWV0YTogewogICAgICAgICAgICAgIC4uLnJvdXRlLm1ldGEKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChyb3V0ZS5jaGlsZHJlbikgewogICAgICAgICAgY29uc3QgdGVtcFRhZ3MgPSB0aGlzLmZpbHRlckFmZml4VGFncyhyb3V0ZS5jaGlsZHJlbiwgcm91dGUucGF0aCk7CiAgICAgICAgICBpZiAodGVtcFRhZ3MubGVuZ3RoID49IDEpIHsKICAgICAgICAgICAgdGFncyA9IFsuLi50YWdzLCAuLi50ZW1wVGFnc107CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHRhZ3M7CiAgICB9LAogICAgZ2VuZXJhdGVUaXRsZSwKICAgIGluaXRUYWdzKCkgewogICAgICBjb25zdCBhZmZpeFRhZ3MgPSB0aGlzLmFmZml4VGFncyA9IHRoaXMuZmlsdGVyQWZmaXhUYWdzKHRoaXMucm91dGVzKTsKICAgICAgZm9yIChjb25zdCB0YWcgb2YgYWZmaXhUYWdzKSB7CiAgICAgICAgLy8gTXVzdCBoYXZlIHRhZyBuYW1lCiAgICAgICAgaWYgKHRhZy5uYW1lKSB7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGFnc1ZpZXcvYWRkVmlzaXRlZFZpZXcnLCB0YWcpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGFkZFRhZ3MoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBuYW1lCiAgICAgIH0gPSB0aGlzLiRyb3V0ZTsKICAgICAgaWYgKG5hbWUpIHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGFnc1ZpZXcvYWRkVmlldycsIHRoaXMuJHJvdXRlKTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgbW92ZVRvQ3VycmVudFRhZygpIHsKICAgICAgY29uc3QgdGFncyA9IHRoaXMuJHJlZnMudGFnOwogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgZm9yIChjb25zdCB0YWcgb2YgdGFncykgewogICAgICAgICAgaWYgKHRhZy50by5wYXRoID09PSB0aGlzLiRyb3V0ZS5wYXRoKSB7CiAgICAgICAgICAgIHRoaXMuJHJlZnMuc2Nyb2xsUGFuZS5tb3ZlVG9UYXJnZXQodGFnKTsKICAgICAgICAgICAgLy8gd2hlbiBxdWVyeSBpcyBkaWZmZXJlbnQgdGhlbiB1cGRhdGUKICAgICAgICAgICAgaWYgKHRhZy50by5mdWxsUGF0aCAhPT0gdGhpcy4kcm91dGUuZnVsbFBhdGgpIHsKICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGFnc1ZpZXcvdXBkYXRlVmlzaXRlZFZpZXcnLCB0aGlzLiRyb3V0ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZWZyZXNoU2VsZWN0ZWRUYWcodmlldykgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndGFnc1ZpZXcvZGVsQ2FjaGVkVmlldycsIHZpZXcpLnRoZW4oKCkgPT4gewogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGZ1bGxQYXRoCiAgICAgICAgfSA9IHZpZXc7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UoewogICAgICAgICAgICBwYXRoOiAnL3JlZGlyZWN0JyArIGZ1bGxQYXRoCiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgY2xvc2VTZWxlY3RlZFRhZyh2aWV3KSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9kZWxWaWV3JywgdmlldykudGhlbigoewogICAgICAgIHZpc2l0ZWRWaWV3cwogICAgICB9KSA9PiB7CiAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUodmlldykpIHsKICAgICAgICAgIHRoaXMudG9MYXN0Vmlldyh2aXNpdGVkVmlld3MsIHZpZXcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2xvc2VPdGhlcnNUYWdzKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLnNlbGVjdGVkVGFnKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3RhZ3NWaWV3L2RlbE90aGVyc1ZpZXdzJywgdGhpcy5zZWxlY3RlZFRhZykudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5tb3ZlVG9DdXJyZW50VGFnKCk7CiAgICAgIH0pOwogICAgfSwKICAgIGNsb3NlQWxsVGFncyh2aWV3KSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd0YWdzVmlldy9kZWxBbGxWaWV3cycpLnRoZW4oKHsKICAgICAgICB2aXNpdGVkVmlld3MKICAgICAgfSkgPT4gewogICAgICAgIGlmICh0aGlzLmFmZml4VGFncy5zb21lKHRhZyA9PiB0YWcucGF0aCA9PT0gdmlldy5wYXRoKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLnRvTGFzdFZpZXcodmlzaXRlZFZpZXdzLCB2aWV3KTsKICAgICAgfSk7CiAgICB9LAogICAgdG9MYXN0Vmlldyh2aXNpdGVkVmlld3MsIHZpZXcpIHsKICAgICAgY29uc3QgbGF0ZXN0VmlldyA9IHZpc2l0ZWRWaWV3cy5zbGljZSgtMSlbMF07CiAgICAgIGlmIChsYXRlc3RWaWV3KSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2gobGF0ZXN0Vmlldyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbm93IHRoZSBkZWZhdWx0IGlzIHRvIHJlZGlyZWN0IHRvIHRoZSBob21lIHBhZ2UgaWYgdGhlcmUgaXMgbm8gdGFncy12aWV3LAogICAgICAgIC8vIHlvdSBjYW4gYWRqdXN0IGl0IGFjY29yZGluZyB0byB5b3VyIG5lZWRzLgogICAgICAgIGlmICh2aWV3Lm5hbWUgPT09ICdEYXNoYm9hcmQnKSB7CiAgICAgICAgICAvLyB0byByZWxvYWQgaG9tZSBwYWdlCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICAgIHBhdGg6ICcvcmVkaXJlY3QnICsgdmlldy5mdWxsUGF0aAogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb3Blbk1lbnUodGFnLCBlKSB7CiAgICAgIGNvbnN0IG1lbnVNaW5XaWR0aCA9IDEwNTsKICAgICAgY29uc3Qgb2Zmc2V0TGVmdCA9IHRoaXMuJGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7IC8vIGNvbnRhaW5lciBtYXJnaW4gbGVmdAogICAgICBjb25zdCBvZmZzZXRXaWR0aCA9IHRoaXMuJGVsLm9mZnNldFdpZHRoOyAvLyBjb250YWluZXIgd2lkdGgKICAgICAgY29uc3QgbWF4TGVmdCA9IG9mZnNldFdpZHRoIC0gbWVudU1pbldpZHRoOyAvLyBsZWZ0IGJvdW5kYXJ5CiAgICAgIGNvbnN0IGxlZnQgPSBlLmNsaWVudFggLSBvZmZzZXRMZWZ0ICsgMTU7IC8vIDE1OiBtYXJnaW4gcmlnaHQKCiAgICAgIGlmIChsZWZ0ID4gbWF4TGVmdCkgewogICAgICAgIHRoaXMubGVmdCA9IG1heExlZnQ7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sZWZ0ID0gbGVmdDsKICAgICAgfQogICAgICB0aGlzLnRvcCA9IGUuY2xpZW50WTsKICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5zZWxlY3RlZFRhZyA9IHRhZzsKICAgIH0sCiAgICBjbG9zZU1lbnUoKSB7CiAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"names":["ScrollPane","path","generateTitle","menu","routes","components","data","visible","top","left","selectedTag","affixTags","computed","visitedViews","$store","state","tagsView","watch","$route","addTags","moveToCurrentTag","value","document","body","addEventListener","closeMenu","removeEventListener","mounted","initTags","created","menuList","menus","list","params","page","limit","sort","$http","url","method","then","code","JSON","parse","menujson","$storage","set","role","get","i","length","roleName","backMenu","concat","methods","isActive","route","filterAffixTags","basePath","tags","forEach","meta","affix","tagPath","resolve","push","fullPath","name","children","tempTags","tag","dispatch","$refs","$nextTick","to","scrollPane","moveToTarget","refreshSelectedTag","view","$router","replace","closeSelectedTag","toLastView","closeOthersTags","closeAllTags","some","latestView","slice","openMenu","e","menuMinWidth","offsetLeft","$el","getBoundingClientRect","offsetWidth","maxLeft","clientX","clientY"],"sources":["src/components/index/TagsView/index.vue"],"sourcesContent":["<template>\r\n\t<div id=\"tags-view-container\" class=\"tags-view-container\" :style='{\"padding\":\"0px 220px 0 0\",\"boxShadow\":\"none\",\"margin\":\"0px auto 0\",\"borderColor\":\"#958344\",\"display\":\"block\",\"overflow\":\"hidden\",\"borderRadius\":\"8px\",\"background\":\"#f1ede2\",\"borderWidth\":\"1px\",\"width\":\"96%\",\"fontSize\":\"14px\",\"lineHeight\":\"40px\",\"borderStyle\":\"solid\",\"height\":\"40px\"}'>\r\n\t\t<scroll-pane ref=\"scrollPane\" class=\"tags-view-wrapper\">\r\n\t\t\t<div class=\"tags-view-box\" :style='{\"width\":\"auto\",\"padding\":\"0 0 0 5px\",\"whiteSpace\":\"nowrap\",\"position\":\"relative\",\"background\":\"none\"}'>\r\n\t\t\t\t<router-link v-for=\"tag in visitedViews\" ref=\"tag\" :key=\"tag.path\" :class=\"isActive(tag)?'active':''\"\r\n\t\t\t\t\t:to=\"{ path: tag.path, query: tag.query, fullPath: tag.fullPath }\" tag=\"span\" class=\"tags-view-item\"\r\n\t\t\t\t\t@click.middle.native=\"closeSelectedTag(tag)\" @contextmenu.prevent.native=\"openMenu(tag,$event)\">\r\n\t\t\t\t\t<span class=\"text\">{{ tag.name }}</span>\r\n\t\t\t\t\t<span v-if=\"!tag.meta.affix\" class=\"el-icon-close\" @click.prevent.stop=\"closeSelectedTag(tag)\" />\r\n\t\t\t\t</router-link>\r\n\t\t\t</div>\r\n\t\t</scroll-pane>\r\n\t\t<ul v-if=\"visible\" :style=\"{left:left+'px',top:top+'px'}\" class=\"contextmenu\">\r\n\t\t\t<li v-if=\"!(selectedTag.meta&&selectedTag.meta.affix)\" @click=\"closeSelectedTag(selectedTag)\">Close</li>\r\n\t\t\t<li @click=\"closeAllTags(selectedTag)\">Close All</li>\r\n\t\t</ul>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport ScrollPane from './ScrollPane.vue'\r\n\timport path from 'path'\r\n\timport {\r\n\t\tgenerateTitle\r\n\t} from '@/utils/i18n'\r\n\timport menu from '@/utils/menu'\r\n\timport { routes } from '@/router/router-static.js'\r\n\t\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tScrollPane\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvisible: false,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tleft: 0,\r\n\t\t\t\tselectedTag: {},\r\n\t\t\t\taffixTags: [],\r\n\t\t\t\troutes: []\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tvisitedViews() {\r\n\t\t\t\treturn this.$store.state.tagsView.visitedViews\r\n\t\t\t},\r\n\t\t\t// routes() {\r\n\t\t\t//   return this.$store.state.menu.routes\r\n\t\t\t// }\r\n\t\t},\r\n\t\twatch: {\r\n\t\t\t$route() {\r\n\t\t\t\tthis.addTags()\r\n\t\t\t\tthis.moveToCurrentTag()\r\n\t\t\t},\r\n\t\t\tvisible(value) {\r\n\t\t\t\tif (value) {\r\n\t\t\t\t\tdocument.body.addEventListener('click', this.closeMenu)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdocument.body.removeEventListener('click', this.closeMenu)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.initTags()\r\n\t\t\tthis.addTags()\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.routes = menu\r\n\t\t\t\r\n\t\t\tlet menuList = []\r\n\t\t\tconst menus = menu.list()\r\n\t\t\tif (menus) {\r\n\t\t\t\tmenuList = menus\r\n\t\t\t} else {\r\n\t\t\t\tlet params = {\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tlimit: 1,\r\n\t\t\t\t\tsort: 'id',\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tthis.$http({\r\n\t\t\t\t\turl: \"menu/list\",\r\n\t\t\t\t\tmethod: \"get\",\r\n\t\t\t\t\tparams: params\r\n\t\t\t\t}).then(({\r\n\t\t\t\t\tdata\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tif (data && data.code === 0) {\r\n\t\t\t\t\t\tmenuList = JSON.parse(data.data.list[0].menujson);\r\n\t\t\t\t\t\tthis.$storage.set(\"menus\", menuList);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.role = this.$storage.get('role')\r\n\t\t\t\r\n\t\t\tfor (let i = 0; i < menuList.length; i++) {\r\n\t\t\t\tif (menuList[i].roleName == this.role) {\r\n\t\t\t\t\tthis.routes = menuList[i].backMenu;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.routes = routes.concat(this.routes);\r\n\t\t\t// console.log(this.visitedViews)\r\n\t\t\t// console.log(this.routes)\r\n\t\t\t// this.initTags()\r\n\t\t\t// this.addTags()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tisActive(route) {\r\n\t\t\t\treturn route.path === this.$route.path\r\n\t\t\t},\r\n\t\t\tfilterAffixTags(routes, basePath = '/') {\r\n\t\t\t\tlet tags = []\r\n\t\t\t\troutes.forEach(route => {\r\n\t\t\t\t\tif (route.meta && route.meta.affix) {\r\n\t\t\t\t\t\tconst tagPath = path.resolve(basePath, route.path)\r\n\t\t\t\t\t\ttags.push({\r\n\t\t\t\t\t\t\tfullPath: tagPath,\r\n\t\t\t\t\t\t\tpath: tagPath,\r\n\t\t\t\t\t\t\tname: route.name,\r\n\t\t\t\t\t\t\tmeta: {\r\n\t\t\t\t\t\t\t\t...route.meta\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (route.children) {\r\n\t\t\t\t\t\tconst tempTags = this.filterAffixTags(route.children, route.path)\r\n\t\t\t\t\t\tif (tempTags.length >= 1) {\r\n\t\t\t\t\t\t\ttags = [...tags, ...tempTags]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\treturn tags\r\n\t\t\t},\r\n\t\t\tgenerateTitle,\r\n\t\t\tinitTags() {\r\n\t\t\t\tconst affixTags = this.affixTags = this.filterAffixTags(this.routes)\r\n\t\t\t\tfor (const tag of affixTags) {\r\n\t\t\t\t\t// Must have tag name\r\n\t\t\t\t\tif (tag.name) {\r\n\t\t\t\t\t\tthis.$store.dispatch('tagsView/addVisitedView', tag)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddTags() {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tname\r\n\t\t\t\t} = this.$route\r\n\t\t\t\tif (name) {\r\n\t\t\t\t\tthis.$store.dispatch('tagsView/addView', this.$route)\r\n\t\t\t\t}\r\n\t\t\t\treturn false\r\n\t\t\t},\r\n\t\t\tmoveToCurrentTag() {\r\n\t\t\t\tconst tags = this.$refs.tag\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tfor (const tag of tags) {\r\n\t\t\t\t\t\tif (tag.to.path === this.$route.path) {\r\n\t\t\t\t\t\t\tthis.$refs.scrollPane.moveToTarget(tag)\r\n\t\t\t\t\t\t\t// when query is different then update\r\n\t\t\t\t\t\t\tif (tag.to.fullPath !== this.$route.fullPath) {\r\n\t\t\t\t\t\t\t\tthis.$store.dispatch('tagsView/updateVisitedView', this.$route)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\trefreshSelectedTag(view) {\r\n\t\t\t\tthis.$store.dispatch('tagsView/delCachedView', view).then(() => {\r\n\t\t\t\t\tconst {\r\n\t\t\t\t\t\tfullPath\r\n\t\t\t\t\t} = view\r\n\t\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\t\tthis.$router.replace({\r\n\t\t\t\t\t\t\tpath: '/redirect' + fullPath\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcloseSelectedTag(view) {\r\n\t\t\t\tthis.$store.dispatch('tagsView/delView', view).then(({\r\n\t\t\t\t\tvisitedViews\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tif (this.isActive(view)) {\r\n\t\t\t\t\t\tthis.toLastView(visitedViews, view)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcloseOthersTags() {\r\n\t\t\t\tthis.$router.push(this.selectedTag)\r\n\t\t\t\tthis.$store.dispatch('tagsView/delOthersViews', this.selectedTag).then(() => {\r\n\t\t\t\t\tthis.moveToCurrentTag()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcloseAllTags(view) {\r\n\t\t\t\tthis.$store.dispatch('tagsView/delAllViews').then(({\r\n\t\t\t\t\tvisitedViews\r\n\t\t\t\t}) => {\r\n\t\t\t\t\tif (this.affixTags.some(tag => tag.path === view.path)) {\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.toLastView(visitedViews, view)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttoLastView(visitedViews, view) {\r\n\t\t\t\tconst latestView = visitedViews.slice(-1)[0]\r\n\t\t\t\tif (latestView) {\r\n\t\t\t\t\tthis.$router.push(latestView)\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// now the default is to redirect to the home page if there is no tags-view,\r\n\t\t\t\t\t// you can adjust it according to your needs.\r\n\t\t\t\t\tif (view.name === 'Dashboard') {\r\n\t\t\t\t\t\t// to reload home page\r\n\t\t\t\t\t\tthis.$router.replace({\r\n\t\t\t\t\t\t\tpath: '/redirect' + view.fullPath\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$router.push('/')\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topenMenu(tag, e) {\r\n\t\t\t\tconst menuMinWidth = 105\r\n\t\t\t\tconst offsetLeft = this.$el.getBoundingClientRect().left // container margin left\r\n\t\t\t\tconst offsetWidth = this.$el.offsetWidth // container width\r\n\t\t\t\tconst maxLeft = offsetWidth - menuMinWidth // left boundary\r\n\t\t\t\tconst left = e.clientX - offsetLeft + 15 // 15: margin right\r\n\r\n\t\t\t\tif (left > maxLeft) {\r\n\t\t\t\t\tthis.left = maxLeft\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.left = left\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.top = e.clientY\r\n\t\t\t\tthis.visible = true\r\n\t\t\t\tthis.selectedTag = tag\r\n\t\t\t},\r\n\t\t\tcloseMenu() {\r\n\t\t\t\tthis.visible = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.tags-view-container {\r\n\t\theight: 34px;\r\n\t\twidth: 100%;\r\n\t\tbackground: #fff;\r\n\t\tborder-bottom: 1px solid #d8dce5;\r\n\t\tbox-shadow: 0 1px 3px 0 rgba(0, 0, 0, .12), 0 0 3px 0 rgba(0, 0, 0, .04);\r\n\r\n\t\t.contextmenu {\r\n\t\t\tmargin: 0;\r\n\t\t\tbackground: #fff;\r\n\t\t\tz-index: 3000;\r\n\t\t\tposition: absolute;\r\n\t\t\tlist-style-type: none;\r\n\t\t\tpadding: 5px 0;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tfont-size: 12px;\r\n\t\t\tfont-weight: 400;\r\n\t\t\tcolor: #333;\r\n\t\t\tbox-shadow: 2px 2px 3px 0 rgba(0, 0, 0, .3);\r\n\r\n\t\t\tli {\r\n\t\t\t\tmargin: 0;\r\n\t\t\t\tpadding: 7px 16px;\r\n\t\t\t\tcursor: pointer;\r\n\r\n\t\t\t\t&:hover {\r\n\t\t\t\t\tbackground: #eee;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item {\r\n\t\t\t\tcursor: pointer;\r\n\t\t\t\tpadding: 0px 8px;\r\n\t\t\t\tmargin: 0 5px 0px 0;\r\n\t\t\t\tcolor: #666;\r\n\t\t\t\tdisplay: inline-block;\r\n\t\t\t\tfont-size: inherit;\r\n\t\t\t\tborder-color: rgba(255, 255, 255, .2);\r\n\t\t\t\tline-height: 28px;\r\n\t\t\t\tborder-radius: 4px;\r\n\t\t\t\tbackground: none;\r\n\t\t\t\twidth: auto;\r\n\t\t\t\tborder-width: 0px;\r\n\t\t\t\tborder-style: solid;\r\n\t\t\t\theight: 28px;\r\n\t\t\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item:hover {\r\n\t\t\t\tborder: 0px solid rgba(255, 255, 255, .2);\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground: #958344;\r\n\t\t\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item.active {\r\n\t\t\t\tborder: 0px solid rgba(255, 255, 255, .2);\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tbackground: #958344;\r\n\t\t\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item .text {\r\n\t\t\t\tcolor: inherit;\r\n\t\t\t\tfont-size: inherit;\r\n\t\t\t}\r\n\t\r\n\t.tags-view-container .tags-view-wrapper .tags-view-item .el-icon-close {\r\n\t\t\t\tcolor: inherit;\r\n\t\t\t\tfont-size: inherit;\r\n\t\t\t}\r\n</style>"],"mappings":"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","ignoreList":[]}]}